{% extends "layout.html.jinja" %}

{% block title %}Completar Registro{% endblock %}

{% block main %}
<div class="container mt-5">
    <h2>Completar Registro</h2>
    <p>Completa tu registro proporcionando la información adicional requerida:</p>

    <p><strong>Email:</strong> {{ user_info['email'] }}</p>
    <p><strong>Nombre:</strong> {{ user_info['given_name'] }}</p>
    <p><strong>Apellido:</strong> {{ user_info['family_name'] }}</p>

    <form action="{{ url_for('google_auth.complete_registration') }}" method="post" class="needs-validation" novalidate>
        <div class="row g-3 d-flex flex-column">
            <div class="col-12">
                <label class="form-label" for="username">*Nombre de Usuario:</label>
                <input class="form-control" type="text" id="username" name="username"
                    pattern="[a-zA-Zá-úÁ-ÚñÑ][a-zA-Zá-úÁ-ÚñÑ0-9._]{2,18}[a-zA-Zá-úÁ-ÚñÑ0-9]" required>
                <div class="invalid-feedback">
                    Por favor, ingrese un nombre de usuario válido.
                    <br>
                    El nombre de usuario debe tener entre 4 y 20 letras, dígitos, '.' y '_'.
                    <br>
                    No puede comenzar con números o símbolos ni terminar en símbolos.
                </div>
            </div>
            <div class="d-flex flex-column flex-lg-row mt-3">
                <div class="w-100">
                    <label class="form-label" for="password">*Contraseña:</label>
                    <input class="form-control password-field" type="password" id="password" name="password"
                        pattern="[^ ]{4,32}" required>
                    <div class="invalid-feedback">
                        Por favor, ingrese una contraseña válida.
                        <br>
                        Las contraseñas deben tener entre 4 y 32 carácteres, no pueden tener espacios.
                    </div>
                </div>

                <div class="w-100">
                    <label class="form-label" for="password_repeat">*Confirmar Contraseña:</label>
                    <input class="form-control confirm-password-field" type="password" id="password_repeat"
                        name="password_repeat" required>
                    <div class="invalid-feedback">
                        Por favor, repita la contraseña aquí. Las contraseñas deben coincidir.
                    </div>
                </div>
            </div>
            <div class="mt-3">
                <a class="btn btn-primary btn-lg btn-block" href="{{ url_for('home') }}" role="button">Cancelar</a>
                <button type="submit" class="btn btn-success btn-lg btn-block"><i
                        class="fa fa-save me-1"></i>Registrar</button>
            </div>
        </div>
    </form>
</div>
{% endblock %}